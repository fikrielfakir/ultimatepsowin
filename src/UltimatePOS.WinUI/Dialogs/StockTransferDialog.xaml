<?xml version="1.0" encoding="utf-8"?>
<ContentDialog
    x:Class="UltimatePOS.WinUI.Dialogs.StockTransferDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:UltimatePOS.WinUI.Dialogs"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="using:UltimatePOS.Core.ViewModels.Stock"
    mc:Ignorable="d"
    Title="Transfer Stock"
    PrimaryButtonText="Transfer"
    CloseButtonText="Cancel"
    DefaultButton="Primary"
    Style="{StaticResource DefaultContentDialogStyle}">


    <StackPanel Spacing="16" MinWidth="400">
        <!-- Product/Search (Simplified to selection for now) -->
        <!-- Ideally we would search here if not pre-selected -->
        <TextBlock Text="{x:Bind ViewModel.SelectedProduct.Name, Mode=OneWay, FallbackValue='Select Product'}" 
                   Style="{StaticResource SubtitleTextBlockStyle}"
                   Visibility="{x:Bind ViewModel.SelectedProduct, Converter={StaticResource BooleanToVisibilityConverter}, Mode=OneWay}"/>

        <Grid ColumnSpacing="16">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Source -->
            <ComboBox Grid.Column="0" Header="From Source" 
                      ItemsSource="{x:Bind ViewModel.Locations, Mode=OneWay}"
                      SelectedItem="{x:Bind ViewModel.SourceLocation, Mode=TwoWay}"
                      DisplayMemberPath="Name"
                      HorizontalAlignment="Stretch"/>

            <FontIcon Grid.Column="1" Glyph="&#xE72A;" VerticalAlignment="Bottom" Margin="0,0,0,8"/>

            <!-- Destination -->
            <ComboBox Grid.Column="2" Header="To Destination" 
                      ItemsSource="{x:Bind ViewModel.Locations, Mode=OneWay}"
                      SelectedItem="{x:Bind ViewModel.DestinationLocation, Mode=TwoWay}"
                      DisplayMemberPath="Name"
                      HorizontalAlignment="Stretch"/>
        </Grid>

        <!-- Quantity -->
        <NumberBox Header="Quantity" 
                   Value="{x:Bind ViewModel.Quantity, Mode=TwoWay}"
                   SpinButtonPlacementMode="Inline"
                   Minimum="0"
                   PlaceholderText="Enter quantity"/>

        <!-- Reference -->
        <TextBox Header="Reference (Optional)" 
                 Text="{x:Bind ViewModel.Reference, Mode=TwoWay}"
                 PlaceholderText="e.g., Transfer Order #456"/>
    </StackPanel>
</ContentDialog>
